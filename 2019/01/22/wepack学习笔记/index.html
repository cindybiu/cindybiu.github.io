<!DOCTYPE html><html lang="zh-cn"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"><meta name="format-detection" content="telephone=no"><meta name="format-detection" content="email=no"><meta name="description"><meta name="keywords" content="Hexo, Gruntjs, Nodejs, Reactjs, Vuejs"><title>webpack学习笔记 - cindyBlog</title><link rel="stylesheet" href="/css/main_style.min.css"><link rel="icon" href="/favicon.ico"></head><body><input id="navi" type="checkbox"><ul class="main-navication"><li><a href="/"><span>Home</span></a></li><li><a href="https://github.com"><span>Github</span></a></li><li><a href="https://www.v2ex.com/"><span>V2EX</span></a></li></ul><div class="wrapper" id="wrap"><div class="post-header"><label class="navi-button light" for="navi">MENU</label><img class="background" src="http://callfiles.ueibo.com/hexo-theme-laughing/post_background.jpg"><div class="post-title"><h1 class="title">webpack学习笔记</h1><ul class="meta"><li><i class="icon icon-author"></i>cindy Liu</li><li><i class="icon icon-clock"></i>8 Minutes</li><li><i class="icon icon-calendar"></i>January 22, 2019</li></ul></div></div><div class="article-content" style="max-width:800px"><p><img src="https://images.pexels.com/photos/1862293/pexels-photo-1862293.jpeg?auto=compress&amp;cs=tinysrgb&amp;h=650&amp;w=940" alt=""></p>
<a id="more"></a>
<h5 id="模块化"><a href="#模块化" class="headerlink" title="模块化"></a>模块化</h5><p>在es6之前，由两种模块化规范：CommonJS 和 AMD，而如今ES6模块化已经逐渐取代了两者，成为浏览器和服务器通用的模块解决方案<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//导入</span><br><span class="line">import &#123; readFile &#125; from &apos;fs&apos;;</span><br><span class="line">import React from &apos;react&apos;</span><br><span class="line"></span><br><span class="line">//导出</span><br><span class="line">export function hello() &#123;&#125;</span><br><span class="line">export default &#123;</span><br><span class="line">    // ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>拓展：<a href="https://segmentfault.com/a/1190000010651936" target="_blank" rel="noopener">在ES6模块特性中，import时如何正确使用花括号’{ }’</a> 当引用的文件由默认导出的 <figure class="highlight plain"><figcaption><span>default ``` 语法时才不需要'&#123;&#125;'</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">###### webpack大致使用如下:</span><br></pre></td></tr></table></figure></p>
</blockquote>
<p>module.exports = {<br>    // 所有模块的入口，webpack从入口开始递归解析出所有依赖的模块<br>    entry: ‘./app.js’,<br>    output: {<br>        // 把入口依赖的所有模块打包成一个文件bundle.js输出<br>        filename: ‘bundle.js’<br>    }<br>}</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">###### webapck 优点：</span><br><span class="line">- 专注于处理模块化的项目，做到开箱即用</span><br><span class="line">- 通过Plugin扩展，完整好用不失灵活</span><br><span class="line">- 使用场景不仅限于web开发</span><br><span class="line">- 社区庞大活跃</span><br><span class="line">- 良好的开发体验</span><br><span class="line">- （与 create-reate-app脚手架紧密结合，便利开发）</span><br><span class="line"></span><br><span class="line">###### 缺点：</span><br><span class="line">- 只能用于采用模块化开发的项目</span><br><span class="line"></span><br><span class="line">##### 使用Loader</span><br><span class="line">webpack把一切文件看作模块，css文件也不例外，但是webpack如果要支持非js类型的文件，要使用Loader机制。</span><br></pre></td></tr></table></figure>
<p>const path = require(‘path’);<br>const ExtractTextPlugin = require(‘extract-text-webpack-plugin’);</p>
<p>module.exports = {<br>  // JavaScript 执行入口文件<br>  entry: ‘./main.js’,<br>  output: {<br>    // 把所有依赖的模块合并输出到一个 bundle.js 文件<br>    filename: ‘bundle.js’,<br>    // 把输出文件都放到 dist 目录下<br>    path: path.resolve(__dirname, ‘./dist’),<br>  },<br>  module: {<br>    rules: [<br>      {<br>        // 用正则去匹配要用该 loader 转换的 CSS 文件<br>        test: /.css$/,<br>        use: ExtractTextPlugin.extract({<br>          // 转换 .css 文件需要使用的 Loader<br>          use: [‘css-loader’],<br>        }),<br>      }<br>    ]<br>  },<br>  plugins: [<br>    new ExtractTextPlugin({<br>      // 从 .js 文件中提取出来的 .css 文件的名称<br>      filename: <code>[name]_[contenthash:8].css</code>,<br>    }),<br>  ]<br>};</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">##### 使用Plugin</span><br><span class="line">可以把注入到bundle.js文件里的css提取到单独的文件中，修改配置如下：</span><br></pre></td></tr></table></figure>
<p>const path = require(‘path’);<br>const ExtractTextPlugin = require(‘extract-text-webpack-plugin’);</p>
<p>module.exports = {<br>  // JavaScript 执行入口文件<br>  entry: ‘./main.js’,<br>  output: {<br>    // 把所有依赖的模块合并输出到一个 bundle.js 文件<br>    filename: ‘bundle.js’,<br>    // 把输出文件都放到 dist 目录下<br>    path: path.resolve(__dirname, ‘./dist’),<br>  },<br>  module: {<br>    rules: [<br>      {<br>        // 用正则去匹配要用该 loader 转换的 CSS 文件<br>        test: /.css$/,<br>        use: ExtractTextPlugin.extract({<br>          // 转换 .css 文件需要使用的 Loader<br>          use: [‘css-loader’],<br>        }),<br>      }<br>    ]<br>  },<br>  plugins: [<br>    new ExtractTextPlugin({<br>      // 从 .js 文件中提取出来的 .css 文件的名称<br>      filename: <code>[name]_[contenthash:8].css</code>,<br>    }),<br>  ]<br>};</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">##### 核心概念</span><br><span class="line">- entry ：入口，webpack执行构建的第一步。</span><br><span class="line">- moudule：模块，一个模块对应一个文件，Webpack会从配置的entry开始递归找出所有依赖的模块</span><br><span class="line">- chunk：代码块，一个chunk由多个模块组合而成，，用于代码合并与分割。</span><br><span class="line">- Loader：模块转换器，用于把原内容转换成新内容</span><br><span class="line">- Plugin:扩展插件</span><br><span class="line">- output：输出结果</span><br><span class="line"></span><br><span class="line">背：entry module chunk loader plugin output</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">##### webpack强大功能</span><br><span class="line">###### 生成source maps (使调试更容易)</span><br><span class="line">webpack在打包时为我们生成source maps，提供了一种对应编译文件和源文件得方法。使得编译后的代码可读性更高。</span><br><span class="line"></span><br><span class="line">在webapck的配置文件中配置source maps,需要配置devtool。有以下四种不同的配置选项</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">devtool选项 | 配置结果</span><br><span class="line">---|---</span><br><span class="line">sourrce-map | 在一个单独的文件中产生一个完整且功能完全的文件，这个文件具有最好的source map，但是它会减慢打包速度</span><br><span class="line">cheap-module-source-map | 在一个单独的文件中生成一个不带列映射的map，不带列映射提高了打包速度，但是也使得浏览器开发者工具只能对应到具体的行，不能对应到具体的列。 </span><br><span class="line">eval-source-map | 使用eval打包源文件模块，在同一个文件中申城干净的source map，这个选项可以在不影响构建速度的前提下生成完整的sourcemap，但是对打包后输出的js文件的执行具有性能和安全隐患</span><br><span class="line">cheap-module-eval-source-map | 这是在打包文件时最快的生成source map 的方法，生成的source map会和打包后的js文件同行显示，没有列映射。</span><br><span class="line"></span><br><span class="line">正如上表所示，由上到下速度越来越快，不过同事也具有越来越多的负面作用</span><br></pre></td></tr></table></figure>
<p>module.exports={<br>    devtool: ‘eval-source-map’,<br>    entry: _dirname + ‘/app/main.js’,<br>    output: {<br>        path: _dirname + “/public”,<br>        filename: “bundle.js”<br>    }<br>}</p>
<p><code>`</code></p>
</div><div class="article-meta" style="max-width:800px"><div class="categories"><i class="icon icon-category"></i><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/笔记/">笔记</a><span class="category-list-count">17</span></li></ul></div></div><div class="article-comment" style="max-width:800px"><div class="ds-thread" id="ds-thread" data-thread-key="cjs5p3x41000gf8vx68neup96" data-title="webpack学习笔记" data-url="http://yoursite.com/2019/01/22/wepack学习笔记/" site-name="ueibo"></div><script>var siteName = document.getElementById('ds-thread').getAttribute('site-name');
var duoshuoQuery = {short_name: siteName};
(function() {
  var ds = document.createElement('script');
  ds.type = 'text/javascript';ds.async = true;
  ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
  ds.charset = 'UTF-8';
  (document.getElementsByTagName('head')[0] 
  || document.getElementsByTagName('body')[0]).appendChild(ds);
})();</script></div><ul class="navication"><li class="home"><a href="/"><i class="icon icon-home"></i></a></li><li><a href="/2019/01/29/事件笔记/"><i class="icon icon-arror-left"></i></a></li><li><a href="/2019/01/11/《react.js小书》读书笔记三/"><i class="icon icon-arror-right"></i></a></li></ul><div class="page-footer"><div class="top"><ul class="social"><li><a href="https://github.com/cindybiu" title="Github" target="_blank"><i class="icon icon-github"></i></a></li><li><a href="https://weibo.com/p/1005052090323133" title="Weibo" target="_blank"><i class="icon icon-weibo"></i></a></li><li><a title="SegmentFault" target="_blank"><i class="icon icon-segmentfault"></i></a></li></ul></div><div class="bottom"><p class="copyright">© 2019 cindyBlog<br><small>POWER BY <a href="https://hexo.io" target="_blank">HEXO</a></small><small>, THEME BY <a href="https://github.com/BoizZ/hexo-theme-laughing" target="_blank">LAUGHING</a></small></p></div></div></div><script>var wrap = document.getElementById('wrap');
window.onload = function () {
  wrap.className += ' done';
}</script></body></html>